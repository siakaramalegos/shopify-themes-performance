---
layout: base.njk
---

<div class="banner">
  <div class="content flow">
    <div class="icon-text">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" width="120" height="120">
        <defs>
          <linearGradient id="grad1" x1="0%" y1="0%" x2="100%" y2="0%" gradientTransform="rotate(45)">
            <!-- background: linear-gradient(135deg, #f7ff0a, #a8f33f, #59e063, #00ca7f, #00b091, #009697, #007b8f, #0a607b); -->
            <stop offset="0%" style="stop-color:#f7ff0a;stop-opacity:1"></stop>
            <stop offset="5%" style="stop-color:#a8f33f;stop-opacity:1"></stop>
            <stop offset="30%" style="stop-color:#59e063;stop-opacity:1"></stop>
            <stop offset="45%" style="stop-color:#00ca7f;stop-opacity:1"></stop>
            <stop offset="60%" style="stop-color:#00b091;stop-opacity:1"></stop>
            <stop offset="75%" style="stop-color:#009697;stop-opacity:1"></stop>
            <stop offset="90%" style="stop-color:#007b8f;stop-opacity:1"></stop>
            <stop offset="100%" style="stop-color:#0a607b;stop-opacity:1"></stop>
          </linearGradient>
        </defs>
        <path fill="url(#grad1)" d="M0 256a256 256 0 1 1 512 0A256 256 0 1 1 0 256zM288 96a32 32 0 1 0 -64 0 32 32 0 1 0 64 0zM256 416c35.3 0 64-28.7 64-64c0-17.4-6.9-33.1-18.1-44.6L366 161.7c5.3-12.1-.2-26.3-12.3-31.6s-26.3 .2-31.6 12.3L257.9 288c-.6 0-1.3 0-1.9 0c-35.3 0-64 28.7-64 64s28.7 64 64 64zM176 144a32 32 0 1 0 -64 0 32 32 0 1 0 64 0zM96 288a32 32 0 1 0 0-64 32 32 0 1 0 0 64zm352-32a32 32 0 1 0 -64 0 32 32 0 1 0 64 0z"/>
      </svg>
      <div>
        <h1>Shopify Theme Vitals</h1>
        <p class="lead">Explore real-user web performance data for popular Shopify themes</p>
      </div>
    </div>
  </div>
</div>

<div class="content flow">
  <div class="flex-container">
    <p class="text-right">
      <button id="mobile-switch" class="client-switch" role="switch" aria-checked="true">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512" width="12" height="12"><path fill="currentColor" d="M16 64C16 28.7 44.7 0 80 0L304 0c35.3 0 64 28.7 64 64l0 384c0 35.3-28.7 64-64 64L80 512c-35.3 0-64-28.7-64-64L16 64zM224 448a32 32 0 1 0 -64 0 32 32 0 1 0 64 0zM304 64L80 64l0 320 224 0 0-320z"/></svg>
        Mobile
      </button>
      <button id="desktop-switch" class="client-switch" role="switch" aria-checked="false">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512" width="12" height="12"><path fill="currentColor" d="M64 0C28.7 0 0 28.7 0 64L0 352c0 35.3 28.7 64 64 64l176 0-10.7 32L160 448c-17.7 0-32 14.3-32 32s14.3 32 32 32l256 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-69.3 0L336 416l176 0c35.3 0 64-28.7 64-64l0-288c0-35.3-28.7-64-64-64L64 0zM512 64l0 224L64 288 64 64l448 0z"/></svg>
        Desktop
      </button>
    </p>

    <table>
      <thead>
        <tr>
          <th>
            <div>
              Theme
              <button id="sortAlpha" class="client-switch" role="switch" aria-checked="true" aria-label="Sort ascending"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512" width="12" height="12"><path fill="currentColor" d="M183.6 469.6C177.5 476.2 169 480 160 480s-17.5-3.8-23.6-10.4l-88-96c-11.9-13-11.1-33.3 2-45.2s33.3-11.1 45.2 2L128 365.7 128 64c0-17.7 14.3-32 32-32s32 14.3 32 32l0 301.7 32.4-35.4c11.9-13 32.2-13.9 45.2-2s13.9 32.2 2 45.2l-88 96zM320 320c0-17.7 14.3-32 32-32l128 0c12.9 0 24.6 7.8 29.6 19.8s2.2 25.7-6.9 34.9L429.3 416l50.7 0c17.7 0 32 14.3 32 32s-14.3 32-32 32l-128 0c-12.9 0-24.6-7.8-29.6-19.8s-2.2-25.7 6.9-34.9L402.7 352 352 352c-17.7 0-32-14.3-32-32zM416 32c12.1 0 23.2 6.8 28.6 17.7l64 128 16 32c7.9 15.8 1.5 35-14.3 42.9s-35 1.5-42.9-14.3L460.2 224l-88.4 0-7.2 14.3c-7.9 15.8-27.1 22.2-42.9 14.3s-22.2-27.1-14.3-42.9l16-32 64-128C392.8 38.8 403.9 32 416 32zM395.8 176l40.4 0L416 135.6 395.8 176z"/></svg></button>
            </div>
          </th>
          <th>
            <div>
              Est. Market <br>Rank (share)
              <button id="sortMarket" class="client-switch" role="switch" aria-checked="false" aria-label="Sort ascending"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512" width="12" height="12"><path fill="currentColor" d="M151.6 469.6C145.5 476.2 137 480 128 480s-17.5-3.8-23.6-10.4l-88-96c-11.9-13-11.1-33.3 2-45.2s33.3-11.1 45.2 2L96 365.7 96 64c0-17.7 14.3-32 32-32s32 14.3 32 32l0 301.7 32.4-35.4c11.9-13 32.2-13.9 45.2-2s13.9 32.2 2 45.2l-88 96zM320 32l32 0c17.7 0 32 14.3 32 32s-14.3 32-32 32l-32 0c-17.7 0-32-14.3-32-32s14.3-32 32-32zm0 128l96 0c17.7 0 32 14.3 32 32s-14.3 32-32 32l-96 0c-17.7 0-32-14.3-32-32s14.3-32 32-32zm0 128l160 0c17.7 0 32 14.3 32 32s-14.3 32-32 32l-160 0c-17.7 0-32-14.3-32-32s14.3-32 32-32zm0 128l224 0c17.7 0 32 14.3 32 32s-14.3 32-32 32l-224 0c-17.7 0-32-14.3-32-32s14.3-32 32-32z"/></svg></button>
            </div>
          </th>
          <th>
            <div>
              Origins passing<br> all CWV
              <button id="sortCWV" class="client-switch" role="switch" aria-checked="false" aria-label="Sort descending"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512" width="12" height="12"><path fill="currentColor" d="M151.6 469.6C145.5 476.2 137 480 128 480s-17.5-3.8-23.6-10.4l-88-96c-11.9-13-11.1-33.3 2-45.2s33.3-11.1 45.2 2L96 365.7 96 64c0-17.7 14.3-32 32-32s32 14.3 32 32l0 301.7 32.4-35.4c11.9-13 32.2-13.9 45.2-2s13.9 32.2 2 45.2l-88 96zM320 480c-17.7 0-32-14.3-32-32s14.3-32 32-32l32 0c17.7 0 32 14.3 32 32s-14.3 32-32 32l-32 0zm0-128c-17.7 0-32-14.3-32-32s14.3-32 32-32l96 0c17.7 0 32 14.3 32 32s-14.3 32-32 32l-96 0zm0-128c-17.7 0-32-14.3-32-32s14.3-32 32-32l160 0c17.7 0 32 14.3 32 32s-14.3 32-32 32l-160 0zm0-128c-17.7 0-32-14.3-32-32s14.3-32 32-32l224 0c17.7 0 32 14.3 32 32s-14.3 32-32 32L320 96z"/></svg></button>
            </div>
          </th>
          <th class="hide-mobile">Good LCP</th>
          <th class="hide-mobile">Good CLS</th>
          <th class="hide-mobile">Good INP</th>
        </tr>
      </thead>
      <tbody id="tbody-mobile">
        {% set sortedThemes = themes | sortThemes %}
        {% for theme in sortedThemes %}
          <tr
            data-market-rank="{{ theme.summary.mobile.marketRank }}"
            data-cwv-rank="{{ theme.summary.mobile.cwvRank }}"
            data-alpha-rank="{{ loop.index }}">
            <td><a href="/themes/{{ theme.slug }}">{{ theme.name }}</a> {% if theme.sunset %}<span class="pill">vintage</span>{% endif %}</td>
            <td>{{ theme.summary.mobile.marketRank }} ({{ theme.summary.mobile.marketSharePct }}%)</td>
            <td>
              <div>
                {{ theme.summary.mobile.passingCWVchart | safe }}
                {{ theme.summary.mobile.passingCWV }}%
                <span class="pill {{ theme.summary.mobile.cwvTrend }}"></span>
              </div>
            </td>
            <td class="hide-mobile"><div>{{ theme.summary.mobile.passingLCP }}% <span class="pill {{ theme.summary.mobile.lcpTrend }}"></span></div></td>
            <td class="hide-mobile"><div>{{ theme.summary.mobile.passingCLS }}% <span class="pill {{ theme.summary.mobile.clsTrend }}"></span></div></td>
            <td class="hide-mobile"><div>{{ theme.summary.mobile.passingINP }}% <span class="pill {{ theme.summary.mobile.inpTrend }}"></span></div></td>
          </tr>
        {% endfor %}
      </tbody>
      <tbody id="tbody-desktop" hidden>
        {% for theme in sortedThemes %}
          <tr
            data-market-rank="{{ theme.summary.desktop.marketRank }}"
            data-cwv-rank="{{ theme.summary.desktop.cwvRank }}"
            data-alpha-rank="{{ loop.index }}">
            <td><a href="/themes/{{ theme.slug }}">{{ theme.name }}</a> {% if theme.sunset %}<span class="pill">vintage</span>{% endif %}</td>
            <td>{{ theme.summary.desktop.marketRank }} ({{ theme.summary.desktop.marketSharePct }}%)</td>
            <td>
              <div>
                {{ theme.summary.desktop.passingCWVchart | safe }}
                {{ theme.summary.desktop.passingCWV }}%
                <span class="pill {{ theme.summary.desktop.cwvTrend }}"></span>
              </div>
            </td>
            <td class="hide-mobile"><div>{{ theme.summary.desktop.passingLCP }}% <span class="pill {{ theme.summary.desktop.lcpTrend }}"></span></div></td>
            <td class="hide-mobile"><div>{{ theme.summary.desktop.passingCLS }}% <span class="pill {{ theme.summary.desktop.clsTrend }}"></span></div></td>
            <td class="hide-mobile"><div>{{ theme.summary.desktop.passingINP }}% <span class="pill {{ theme.summary.desktop.inpTrend }}"></span></div></td>
          </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
</div>

<script>
  // Desktop/mobile switch
  const buttonMobile = document.querySelector("#mobile-switch")
  const buttonDesktop = document.querySelector("#desktop-switch")
  const tbodyMobile = document.querySelector("#tbody-mobile")
  const tbodyDesktop = document.querySelector("#tbody-desktop")

  buttonMobile.addEventListener("click", e => {
    tbodyMobile.hidden = false
    tbodyDesktop.hidden = true
    buttonMobile.setAttribute("aria-checked", true)
    buttonDesktop.setAttribute("aria-checked", false)
  })
  buttonDesktop.addEventListener("click", e => {
    tbodyMobile.hidden = true
    tbodyDesktop.hidden = false
    buttonMobile.setAttribute("aria-checked", false)
    buttonDesktop.setAttribute("aria-checked", true)
  })

  // Sorting
  const CLIENTS = ['mobile', 'desktop']
  const buttonSortAlpha = document.querySelector("#sortAlpha")
  const buttonSortMarket = document.querySelector("#sortMarket")
  const buttonSortCWV = document.querySelector("#sortCWV")

  // By market rank
  buttonSortMarket.addEventListener("click", e => {
    buttonSortMarket.setAttribute("aria-checked", true)
    buttonSortCWV.setAttribute("aria-checked", false)
    buttonSortAlpha.setAttribute("aria-checked", false)

    CLIENTS.forEach(client => {
      const fragment = document.createDocumentFragment();
      const sorted = [...document.querySelectorAll(`#tbody-${client} tr`)].sort((a,b) => {
        return a.dataset.marketRank - b.dataset.marketRank;
      });

      sorted.forEach((elem) => {
        fragment.appendChild(elem);
      });

      document.querySelector(`#tbody-${client}`).appendChild(fragment);
    })
  })

  // By CWV rank
  buttonSortCWV.addEventListener("click", e => {
    buttonSortCWV.setAttribute("aria-checked", true)
    buttonSortMarket.setAttribute("aria-checked", false)
    buttonSortAlpha.setAttribute("aria-checked", false)

    CLIENTS.forEach(client => {
      const fragment = document.createDocumentFragment();
      const sorted = [...document.querySelectorAll(`#tbody-${client} tr`)].sort((a,b) => {
        return a.dataset.cwvRank - b.dataset.cwvRank;
      });

      sorted.forEach((elem) => {
        fragment.appendChild(elem);
      });

      document.querySelector(`#tbody-${client}`).appendChild(fragment);
    })
  })

  // By alpha
  buttonSortAlpha.addEventListener("click", e => {
    buttonSortAlpha.setAttribute("aria-checked", true)
    buttonSortCWV.setAttribute("aria-checked", false)
    buttonSortMarket.setAttribute("aria-checked", false)

    CLIENTS.forEach(client => {
      const fragment = document.createDocumentFragment();
      const sorted = [...document.querySelectorAll(`#tbody-${client} tr`)].sort((a,b) => {
        return a.dataset.alphaRank - b.dataset.alphaRank;
      });

      sorted.forEach((elem) => {
        fragment.appendChild(elem);
      });

      document.querySelector(`#tbody-${client}`).appendChild(fragment);
    })
  })
</script>
